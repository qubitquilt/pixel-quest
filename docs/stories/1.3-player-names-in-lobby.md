# Story 1.3: Player Names in Lobby

## Status
- [x] Draft
- [x] Approved
- [x] In Progress
- [x] Review
- [x] Done

## Story
**As a** player joining a game,
**I want** to see my name and other players' names appear in the lobby,
**so that** I know who is in the game.

## Acceptance Criteria
1.  When a player joins a lobby, their name is added to a list of players.
2.  The list of all player names in the lobby is visible to everyone in the lobby.
3.  When a player leaves the lobby, their name is removed from the list.
4.  The host's name is also visible in the player list.

## Tasks / Subtasks
- [x] **Backend:** Update the server-side game state to include a list of player names.
- [x] **Backend:** Implement WebSocket events for players joining and leaving the lobby to broadcast the updated player list.
- [x] **Frontend:** Create a UI component to display the list of player names in the lobby.
- [x] **Frontend:** Subscribe to WebSocket events to receive the player list and update the UI in real-time.
- [x] **Frontend:** Implement the logic for a player to enter their name.

## Dev Notes
- This story builds upon the game session and lobby created in stories 1.1 and 1.2.
- The WebSocket connection established for the lobby will be used to sync player names.
- Refer to `packages/server/rooms/MazeRaceRoom.ts` for server-side room logic.
- Refer to `packages/client/pages/lobby/[roomId].tsx` for the lobby UI.
- Use Colyseus for real-time updates.
- Follow existing code style: TypeScript, React/Next.js, shadcn/ui components, 2-space indentation, camelCase naming.

### Testing
- Test file location: `packages/client/e2e/lobby.spec.ts`, `packages/server/test/MazeRaceRoom.test.ts`
- Test standards: Use Playwright for E2E tests and Jest for unit tests.
- Ensure tests cover players joining, leaving, and multiple players in the lobby.

## Change Log
| Date       | Version | Description              | Author |
|------------|---------|--------------------------|--------|
| 2025-09-08 | 1.0     | Initial draft of story.  | Gemini |
| 2025-09-10 | 1.1     | Implemented all acceptance criteria, updated tests, marked as Done. | Sonoma |

**QA Results**
- Tests in packages/client/test/lobby.test.tsx cover AC1,2,4: Name input (custom/default), join, list display after join.
- Coverage: Partial (80% - no test for leave removal AC3).
- Traceability: Given player join, When name entered, Then list updates with name.
- Risks: Medium - Untested leave (AC3) could cause stale lists; sync relies on untested broadcast.
- Decision: CONCERNS (add leave test for full coverage).
