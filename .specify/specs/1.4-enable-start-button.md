# Story 1.4: Enable Start Button

## Status
- [ ] Draft
- [ ] Approved
- [ ] In Progress
- [ ] Review
- [ ] Done

## Story
**As a** host,
**I want** the "Start Game" button to be enabled only when at least one other player has joined,
**so that** I cannot start a game by myself.

## Acceptance Criteria
1.  The "Start Game" button is disabled by default when the host first creates the lobby.
2.  The "Start Game" button remains disabled as long as the host is the only player in the lobby.
3.  The "Start Game" button becomes enabled as soon as a second player joins the lobby.
4.  If all other players leave and the host is alone again, the "Start Game" button becomes disabled.

## Tasks / Subtasks
- [ ] **Backend:** The server-side game state needs to track the number of players in the lobby.
- [ ] **Backend:** When the player count changes, the server should emit a WebSocket event to the host client with the current player count.
- [ ] **Frontend:** The "Start Game" button component should be disabled by default.
- [ ] **Frontend:** The host client should listen for the player count WebSocket event.
- [ ] **Frontend:** The state of the "Start Game" button (enabled/disabled) should be updated based on the player count received from the server.

## Dev Notes
- This story directly depends on story 1.3, which implements the player list.
- The logic for enabling/disabling the button should be handled on the client-side, based on information from the server.
- The server should be the source of truth for the player count.
- Refer to `packages/server/src/game/game.gateway.ts` (if it exists) for WebSocket handling.
- Refer to `packages/client/app/lobby/[gameId]/page.tsx` (if it exists) for the lobby UI.

### Testing
- Test file location: `packages/client/e2e/lobby.spec.ts`
- Test standards: Use Playwright for E2E tests.
- E2E tests should cover:
    - Button is disabled when host is alone.
    - Button becomes enabled when a second player joins.
    - Button becomes disabled again if the second player leaves.

## Change Log
| Date       | Version | Description              | Author |
|------------|---------|--------------------------|--------|
| 2025-09-08 | 1.0     | Initial draft of story.  | Gemini |
